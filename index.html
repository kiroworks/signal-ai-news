<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIGNAL â€” AI Intelligence Feed</title>
  <meta name="description" content="AIã®é‡è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹ã ã‘ã‚’å³é¸ã€‚Claude AIãŒæ–°è¦æ€§ãƒ»ä¿¡é ¼æ€§ãƒ»é‡è¦æ€§ãƒ»å®Ÿç”¨æ€§ã®4è»¸ã§ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã—ãŸè¨˜äº‹ã‚’æ—¥è‹±ãƒã‚¤ãƒªãƒ³ã‚¬ãƒ«ã§æ¯æ—¥é…ä¿¡ã€‚">
  <meta property="og:title" content="SIGNAL â€” AI Intelligence Feed">
  <meta property="og:description" content="ãƒã‚¤ã‚ºã‚’æ’é™¤ã—ã€AIã®æœ¬è³ªçš„ãªå‹•ãã ã‘ã‚’å±Šã‘ã‚‹ã€‚å³é¸AIãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’æ¯æ—¥é…ä¿¡ã€‚">
  <meta property="og:type" content="website">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:     #09090e;
      --bg2:    #101018;
      --bg3:    #17171f;
      --bg4:    #1e1e28;
      --border: rgba(255,255,255,0.06);
      --border2:rgba(255,255,255,0.12);
      --text:   #e2e2ec;
      --muted:  #7878a0;
      --dim:    #454560;
      --accent: #00d4f5;
      --orange: #ff6b35;
      --purple: #9b87f5;
      --green:  #22c55e;
      --red:    #f87171;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-weight: 300;
      line-height: 1.65;
      min-height: 100vh;
      overflow-x: hidden;
    }

    a { color: inherit; text-decoration: none; }

    /* â”€â”€â”€ NOISE â”€â”€â”€ */
    body::after {
      content: '';
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
      opacity: 0.025;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    }

    /* â”€â”€â”€ HEADER â”€â”€â”€ */
    header {
      position: sticky;
      top: 0;
      z-index: 200;
      background: rgba(9,9,14,0.88);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border-bottom: 1px solid var(--border);
    }

    .header-inner {
      max-width: 1320px;
      margin: 0 auto;
      padding: 0 24px;
      height: 60px;
      display: flex;
      align-items: center;
      gap: 32px;
    }

    .logo {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 22px;
      letter-spacing: 3px;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
    }

    .logo-pulse {
      width: 7px;
      height: 7px;
      background: var(--accent);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.4;transform:scale(.85)} }

    .nav {
      display: flex;
      gap: 4px;
      flex: 1;
    }

    .nav-btn {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: .8px;
      padding: 6px 12px;
      border-radius: 6px;
      transition: all .2s;
    }

    .nav-btn:hover  { color: var(--text); background: var(--bg3); }
    .nav-btn.active { color: var(--accent); background: rgba(0,212,245,.1); }

    .header-right {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    .live-badge {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 11px;
      color: var(--muted);
    }

    .live-dot {
      width: 5px;
      height: 5px;
      background: var(--green);
      border-radius: 50%;
      animation: pulse 1.5s ease-in-out infinite;
    }

    .lang-btn {
      background: var(--bg3);
      border: 1px solid var(--border2);
      color: var(--muted);
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 11px;
      font-weight: 500;
      letter-spacing: .5px;
      transition: all .2s;
    }

    .lang-btn:hover { border-color: var(--accent); color: var(--accent); }

    .subscribe-btn {
      background: var(--accent);
      border: none;
      color: #000;
      padding: 7px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: .3px;
      transition: all .2s;
    }

    .subscribe-btn:hover { background: #00bbe0; transform: translateY(-1px); }

    /* â”€â”€â”€ TICKER â”€â”€â”€ */
    .ticker-bar {
      background: var(--bg2);
      border-bottom: 1px solid var(--border);
      overflow: hidden;
      height: 38px;
      display: flex;
      align-items: center;
    }

    .ticker-label {
      flex-shrink: 0;
      padding: 0 16px;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 1.5px;
      color: var(--accent);
      text-transform: uppercase;
      border-right: 1px solid var(--border);
      height: 100%;
      display: flex;
      align-items: center;
    }

    .ticker-track-wrap { flex: 1; overflow: hidden; }

    .ticker-track {
      display: flex;
      width: max-content;
      animation: marquee 40s linear infinite;
    }

    .ticker-track:hover { animation-play-state: paused; }

    .ticker-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 28px;
      white-space: nowrap;
      font-size: 12px;
      color: var(--muted);
    }

    .ticker-badge {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: .8px;
      padding: 2px 6px;
      border-radius: 3px;
      text-transform: uppercase;
    }

    .ticker-badge.critical { background: rgba(248,113,113,.2); color: var(--red); }
    .ticker-badge.high     { background: rgba(255,107,53,.2);  color: var(--orange); }

    @keyframes marquee { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }

    /* â”€â”€â”€ FEATURED â”€â”€â”€ */
    .featured {
      border-bottom: 1px solid var(--border);
      background: linear-gradient(135deg, rgba(0,212,245,.05) 0%, rgba(155,135,245,.05) 100%);
    }

    .featured-inner {
      max-width: 1320px;
      margin: 0 auto;
      padding: 36px 24px;
    }

    .section-eyebrow {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-eyebrow::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    .featured-card {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 24px;
      align-items: start;
    }

    .featured-badges {
      display: flex;
      gap: 6px;
      margin-bottom: 12px;
    }

    .featured-title {
      font-size: 26px;
      font-weight: 500;
      line-height: 1.35;
      margin-bottom: 14px;
      letter-spacing: -.3px;
    }

    .featured-insight {
      background: rgba(0,212,245,.06);
      border-left: 3px solid var(--accent);
      padding: 12px 16px;
      border-radius: 0 8px 8px 0;
      font-size: 14px;
      color: var(--text);
      line-height: 1.7;
      margin-bottom: 16px;
    }

    .insight-label {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 6px;
    }

    .featured-meta {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 12px;
      color: var(--muted);
    }

    .featured-score {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .score-num {
      font-family: 'DM Mono', monospace;
      font-size: 13px;
      font-weight: 500;
      color: var(--accent);
    }

    .score-track {
      width: 40px;
      height: 3px;
      background: var(--bg4);
      border-radius: 2px;
      overflow: hidden;
    }

    .score-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--orange));
      border-radius: 2px;
    }

    .source-link-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: var(--bg3);
      border: 1px solid var(--border2);
      border-radius: 6px;
      font-size: 12px;
      color: var(--muted);
      cursor: pointer;
      transition: all .2s;
      white-space: nowrap;
    }

    .source-link-btn:hover { border-color: var(--accent); color: var(--accent); }

    /* â”€â”€â”€ MAIN LAYOUT â”€â”€â”€ */
    .page {
      max-width: 1320px;
      margin: 0 auto;
      padding: 32px 24px;
      display: grid;
      grid-template-columns: 1fr 288px;
      gap: 32px;
    }

    /* â”€â”€â”€ CURATION BAR â”€â”€â”€ */
    .curation-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 12px;
      color: var(--muted);
    }

    .curation-bar strong { color: var(--text); }

    .curation-bar a {
      color: var(--accent);
      cursor: pointer;
      font-size: 11px;
    }

    /* â”€â”€â”€ FILTER TABS â”€â”€â”€ */
    .filter-tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap;
    }

    .tab {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      padding: 6px 14px;
      font-size: 12px;
      font-weight: 500;
      border-radius: 6px;
      transition: all .2s;
    }

    .tab:hover  { color: var(--text); background: var(--bg3); }
    .tab.active { color: var(--accent); background: rgba(0,212,245,.1); }

    /* â”€â”€â”€ ARTICLE LIST â”€â”€â”€ */
    .articles { display: flex; flex-direction: column; gap: 12px; }

    /* â”€â”€â”€ ARTICLE CARD â”€â”€â”€ */
    .article-card {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 10px;
      overflow: hidden;
      transition: border-color .2s;
    }

    .article-card:hover { border-color: var(--border2); }
    .article-card.expanded { border-color: rgba(0,212,245,.3); }

    .card-top {
      padding: 18px 20px 16px;
      cursor: pointer;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .card-badges { display: flex; gap: 5px; flex-wrap: wrap; }

    .badge {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: .8px;
      text-transform: uppercase;
      padding: 3px 8px;
      border-radius: 4px;
      border: 1px solid transparent;
    }

    .badge.critical { background: rgba(248,113,113,.15); border-color: rgba(248,113,113,.4); color: var(--red); }
    .badge.high     { background: rgba(255,107,53,.15);  border-color: rgba(255,107,53,.4);  color: var(--orange); }
    .badge.normal   { background: rgba(0,212,245,.1);    border-color: rgba(0,212,245,.3);   color: var(--accent); }

    .badge.cat-research { background: rgba(155,135,245,.1); border-color: rgba(155,135,245,.3); color: var(--purple); }
    .badge.cat-product  { background: rgba(0,212,245,.08);  border-color: rgba(0,212,245,.25);  color: var(--accent); }
    .badge.cat-business { background: rgba(255,107,53,.1);  border-color: rgba(255,107,53,.25);  color: var(--orange); }
    .badge.cat-policy   { background: rgba(34,197,94,.1);   border-color: rgba(34,197,94,.3);    color: var(--green); }

    .card-score {
      display: flex;
      align-items: center;
      gap: 5px;
      flex-shrink: 0;
    }

    .card-title {
      font-size: 15px;
      font-weight: 500;
      line-height: 1.45;
      margin-bottom: 10px;
      letter-spacing: -.1px;
    }

    .card-insight {
      font-size: 13px;
      color: var(--muted);
      line-height: 1.6;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .card-insight-label {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 4px;
    }

    .card-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .card-source {
      font-size: 11px;
      color: var(--dim);
    }

    .expand-toggle {
      font-size: 11px;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 4px;
      transition: gap .2s;
    }

    .expand-icon {
      display: inline-block;
      transition: transform .3s;
      font-size: 10px;
    }

    .article-card.expanded .expand-icon { transform: rotate(180deg); }

    /* â”€â”€â”€ EXPANDED BODY â”€â”€â”€ */
    .card-body {
      max-height: 0;
      overflow: hidden;
      transition: max-height .35s ease;
    }

    .article-card.expanded .card-body { max-height: 1000px; }

    .card-body-inner {
      padding: 0 20px 20px;
      border-top: 1px solid var(--border);
    }

    .full-summary {
      font-size: 14px;
      color: var(--muted);
      line-height: 1.75;
      padding: 16px 0 12px;
    }

    .summary-toggle {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    .summary-tab {
      font-size: 11px;
      color: var(--dim);
      cursor: pointer;
      padding: 3px 8px;
      border-radius: 4px;
      transition: all .2s;
    }

    .summary-tab.active { color: var(--accent); background: rgba(0,212,245,.1); }

    .card-action-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .card-tags { display: flex; gap: 5px; flex: 1; flex-wrap: wrap; }

    .tag-chip {
      font-size: 10px;
      color: var(--dim);
      background: var(--bg3);
      padding: 2px 7px;
      border-radius: 4px;
    }

    /* â”€â”€â”€ LOADING / EMPTY â”€â”€â”€ */
    .state-box {
      padding: 64px 24px;
      text-align: center;
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--muted);
    }

    .spinner {
      width: 28px;
      height: 28px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin .7s linear infinite;
      margin: 0 auto 12px;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .state-box h3 { font-size: 15px; color: var(--text); margin-bottom: 6px; }
    .state-box p  { font-size: 13px; }

    /* â”€â”€â”€ SIDEBAR â”€â”€â”€ */
    aside { display: flex; flex-direction: column; gap: 16px; }

    .widget {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 18px;
    }

    .widget-title {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 14px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 9px 0;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
    }

    .stat-row:last-child { border-bottom: none; }
    .stat-row-label { color: var(--muted); }
    .stat-row-val {
      font-family: 'DM Mono', monospace;
      font-size: 13px;
      font-weight: 500;
      color: var(--accent);
    }

    /* â”€â”€â”€ SCORE EXPLANATION â”€â”€â”€ */
    .score-explain {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.65;
    }

    .score-axis {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 10px;
    }

    .axis-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
    }

    .axis-label { color: var(--muted); flex: 1; }
    .axis-pts   { color: var(--accent); font-family: 'DM Mono', monospace; font-size: 10px; flex-shrink: 0; }

    .axis-bar-bg { width: 60px; height: 3px; background: var(--bg3); border-radius: 2px; }
    .axis-bar-fill { height: 100%; border-radius: 2px; background: var(--accent); }

    /* â”€â”€â”€ NEWSLETTER â”€â”€â”€ */
    .nl-lead {
      font-size: 20px;
      font-weight: 500;
      line-height: 1.35;
      margin-bottom: 8px;
      letter-spacing: -.2px;
    }

    .nl-desc {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.6;
      margin-bottom: 14px;
    }

    .nl-form { display: flex; flex-direction: column; gap: 8px; }

    .nl-input {
      width: 100%;
      background: var(--bg3);
      border: 1px solid var(--border2);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 6px;
      font-size: 13px;
      transition: border-color .2s;
    }

    .nl-input::placeholder { color: var(--dim); }
    .nl-input:focus { outline: none; border-color: var(--accent); }

    .nl-btn {
      width: 100%;
      background: var(--accent);
      border: none;
      color: #000;
      padding: 10px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all .2s;
    }

    .nl-btn:hover { background: #00bbe0; transform: translateY(-1px); }
    .nl-btn:disabled { opacity: .6; cursor: not-allowed; transform: none; }

    .nl-msg {
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 6px;
      display: none;
    }

    .nl-msg.ok  { display: block; background: rgba(34,197,94,.12); color: var(--green); }
    .nl-msg.err { display: block; background: rgba(248,113,113,.12); color: var(--red); }

    .nl-proof { font-size: 11px; color: var(--dim); margin-top: 10px; text-align: center; }

    /* â”€â”€â”€ AD â”€â”€â”€ */
    .ad-box {
      aspect-ratio: 4/3;
      background: var(--bg3);
      border: 1px dashed var(--border2);
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      color: var(--dim);
      font-size: 11px;
      cursor: pointer;
      transition: all .2s;
    }

    .ad-box:hover { border-color: var(--accent); color: var(--muted); }

    /* â”€â”€â”€ SOURCES â”€â”€â”€ */
    .sources-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }

    .source-chip {
      background: var(--bg3);
      border: 1px solid var(--border);
      font-size: 10px;
      color: var(--muted);
      padding: 5px 8px;
      border-radius: 5px;
      text-align: center;
    }

    /* â”€â”€â”€ FOOTER â”€â”€â”€ */
    footer {
      border-top: 1px solid var(--border);
      background: var(--bg2);
      padding: 40px 24px 32px;
      margin-top: 60px;
    }

    .footer-inner {
      max-width: 1320px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 24px;
      margin-bottom: 28px;
    }

    .footer-col h4 { font-size: 11px; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: .8px; margin-bottom: 12px; }
    .footer-col a  { display: block; font-size: 13px; color: var(--dim); margin-bottom: 7px; transition: color .2s; }
    .footer-col a:hover { color: var(--accent); }

    .footer-bottom {
      border-top: 1px solid var(--border);
      padding-top: 20px;
      max-width: 1320px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--dim);
      flex-wrap: wrap;
      gap: 8px;
    }

    /* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
    @media (max-width: 1024px) {
      .page { grid-template-columns: 1fr; }
      aside { display: grid; grid-template-columns: 1fr 1fr; }
    }

    @media (max-width: 680px) {
      .header-inner { gap: 16px; }
      .nav { display: none; }
      .featured-title { font-size: 20px; }
      .featured-card { grid-template-columns: 1fr; }
      aside { grid-template-columns: 1fr; }
    }

    /* â”€â”€â”€ MODAL (newsletter from header) â”€â”€â”€ */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal-overlay.open { display: flex; }

    .modal {
      background: var(--bg2);
      border: 1px solid var(--border2);
      border-radius: 12px;
      padding: 32px;
      max-width: 400px;
      width: 100%;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 20px;
      line-height: 1;
      padding: 4px;
    }

    .modal-close:hover { color: var(--text); }
  </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header>
  <div class="header-inner">
    <div class="logo">SIGNAL <div class="logo-pulse"></div></div>

    <nav class="nav" id="mainNav">
      <button class="nav-btn active" data-cat="all"      data-i18n="cat_all">ã™ã¹ã¦</button>
      <button class="nav-btn"        data-cat="research" data-i18n="cat_research">ç ”ç©¶ãƒ»è«–æ–‡</button>
      <button class="nav-btn"        data-cat="product"  data-i18n="cat_product">è£½å“ãƒ»ãƒªãƒªãƒ¼ã‚¹</button>
      <button class="nav-btn"        data-cat="business" data-i18n="cat_business">ãƒ“ã‚¸ãƒã‚¹</button>
      <button class="nav-btn"        data-cat="policy"   data-i18n="cat_policy">è¦åˆ¶ãƒ»æ”¿ç­–</button>
    </nav>

    <div class="header-right">
      <div class="live-badge">
        <div class="live-dot"></div>
        <span data-i18n="live">ãƒ©ã‚¤ãƒ–</span>
      </div>
      <button class="lang-btn" id="langBtn">EN</button>
      <button class="subscribe-btn" id="headerSubBtn" data-i18n="subscribe_btn">ç„¡æ–™ã§è³¼èª­</button>
    </div>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• TICKER â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="ticker-bar">
  <div class="ticker-label" data-i18n="breaking">BREAKING</div>
  <div class="ticker-track-wrap">
    <div class="ticker-track" id="tickerTrack">
      <div class="ticker-item"><span class="ticker-badge high">LOADING</span> AIãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• FEATURED â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="featured" id="featuredSection" style="display:none">
  <div class="featured-inner">
    <div class="section-eyebrow" data-i18n="top_story">æœ¬æ—¥ã®æœ€é‡è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
    <div id="featuredCard"></div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page">
  <main>
    <!-- å³é¸çŠ¶æ³ãƒãƒ¼ -->
    <div class="curation-bar" id="curationBar">
      <span data-i18n="loading_articles">è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...</span>
      <a id="scoreInfoLink" data-i18n="what_is_score">ã‚¹ã‚³ã‚¢ã¨ã¯ï¼Ÿ</a>
    </div>

    <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¿ãƒ– -->
    <div class="filter-tabs" id="filterTabs">
      <button class="tab active" data-cat="all"      data-i18n="cat_all">ã™ã¹ã¦</button>
      <button class="tab"        data-cat="research" data-i18n="cat_research">ç ”ç©¶ãƒ»è«–æ–‡</button>
      <button class="tab"        data-cat="product"  data-i18n="cat_product">è£½å“ãƒ»ãƒªãƒªãƒ¼ã‚¹</button>
      <button class="tab"        data-cat="business" data-i18n="cat_business">ãƒ“ã‚¸ãƒã‚¹</button>
      <button class="tab"        data-cat="policy"   data-i18n="cat_policy">è¦åˆ¶ãƒ»æ”¿ç­–</button>
    </div>

    <!-- è¨˜äº‹ä¸€è¦§ -->
    <div class="articles" id="articlesList">
      <div class="state-box">
        <div class="spinner"></div>
        <p data-i18n="loading">èª­ã¿è¾¼ã¿ä¸­...</p>
      </div>
    </div>
  </main>

  <!-- â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â• -->
  <aside>

    <!-- ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼ï¼ˆæœ€å„ªå…ˆï¼‰ -->
    <div class="widget">
      <div class="nl-lead" data-i18n="nl_lead">æ¯æœã€é‡è¦ãªAIãƒ‹ãƒ¥ãƒ¼ã‚¹ã ã‘ã‚’ãƒ¡ãƒ¼ãƒ«ã§</div>
      <div class="nl-desc" data-i18n="nl_desc">Claude AIãŒå³é¸ã—ãŸä¸Šä½è¨˜äº‹ã®ã¿ã€‚ãƒã‚¤ã‚ºãªã—ã€åºƒå‘Šãªã—ã€‚æ¯æœ7æ™‚é…ä¿¡ã€‚</div>
      <div class="nl-form">
        <input type="email" class="nl-input" id="nlEmail" placeholder="your@email.com">
        <button class="nl-btn" id="nlBtn" data-i18n="nl_btn">ç„¡æ–™ã§è³¼èª­ã™ã‚‹</button>
        <div class="nl-msg" id="nlMsg"></div>
      </div>
      <div class="nl-proof" data-i18n="nl_proof">ç„¡æ–™ Â· ã„ã¤ã§ã‚‚è§£é™¤å¯èƒ½</div>
    </div>

    <!-- æœ¬æ—¥ã®å‹•å‘ -->
    <div class="widget">
      <div class="widget-title" data-i18n="pulse">æœ¬æ—¥ã®å‹•å‘</div>
      <div class="stat-row"><span class="stat-row-label" data-i18n="stat_critical">ğŸ”´ æœ€é‡è¦</span><span class="stat-row-val" id="s-critical">â€”</span></div>
      <div class="stat-row"><span class="stat-row-label" data-i18n="stat_high">ğŸŸ  é‡è¦</span><span class="stat-row-val" id="s-high">â€”</span></div>
      <div class="stat-row"><span class="stat-row-label" data-i18n="stat_today">æœ¬æ—¥ã®æ²è¼‰æ•°</span><span class="stat-row-val" id="s-today">â€”</span></div>
      <div class="stat-row"><span class="stat-row-label" data-i18n="stat_avg">å¹³å‡ã‚¹ã‚³ã‚¢</span><span class="stat-row-val" id="s-avg">â€”</span></div>
    </div>

    <!-- ã‚¹ã‚³ã‚¢èª¬æ˜ -->
    <div class="widget" id="scoreWidget">
      <div class="widget-title" data-i18n="score_title">å“è³ªã‚¹ã‚³ã‚¢ã¨ã¯ï¼Ÿ</div>
      <div class="score-explain" data-i18n="score_desc">Claude AIãŒ4ã¤ã®è»¸ã§æ¡ç‚¹ã—ãŸä¿¡é ¼æ€§æŒ‡æ¨™ã§ã™ã€‚<strong>60ç‚¹ä»¥ä¸Šã®ã¿æ²è¼‰</strong>ã—ã¾ã™ã€‚</div>
      <div class="score-axis">
        <div class="axis-row">
          <span class="axis-label" data-i18n="ax1">æ–°è¦æ€§</span>
          <div class="axis-bar-bg"><div class="axis-bar-fill" style="width:100%"></div></div>
          <span class="axis-pts">30pt</span>
        </div>
        <div class="axis-row">
          <span class="axis-label" data-i18n="ax2">ä¿¡é ¼æ€§</span>
          <div class="axis-bar-bg"><div class="axis-bar-fill" style="width:83%"></div></div>
          <span class="axis-pts">25pt</span>
        </div>
        <div class="axis-row">
          <span class="axis-label" data-i18n="ax3">é‡è¦æ€§</span>
          <div class="axis-bar-bg"><div class="axis-bar-fill" style="width:83%"></div></div>
          <span class="axis-pts">25pt</span>
        </div>
        <div class="axis-row">
          <span class="axis-label" data-i18n="ax4">å®Ÿç”¨æ€§</span>
          <div class="axis-bar-bg"><div class="axis-bar-fill" style="width:67%"></div></div>
          <span class="axis-pts">20pt</span>
        </div>
      </div>
    </div>

    <!-- åºƒå‘Šæ  -->
    <div class="widget">
      <div class="widget-title" data-i18n="ad_title">ã‚¹ãƒãƒ³ã‚µãƒ¼</div>
      <div class="ad-box" onclick="window.location='mailto:contact@signal-ai.news'">
        <span style="font-size:18px">ğŸ“¢</span>
        <span data-i18n="ad_cta">åºƒå‘Šæ²è¼‰ã®ãŠå•ã„åˆã‚ã›</span>
      </div>
    </div>

    <!-- ã‚½ãƒ¼ã‚¹ä¸€è¦§ -->
    <div class="widget">
      <div class="widget-title" data-i18n="sources_title">ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚½ãƒ¼ã‚¹ï¼ˆ13ä»¶ï¼‰</div>
      <div class="sources-grid">
        <div class="source-chip">arXiv AI</div>
        <div class="source-chip">OpenAI</div>
        <div class="source-chip">DeepMind</div>
        <div class="source-chip">Anthropic</div>
        <div class="source-chip">Google AI</div>
        <div class="source-chip">Meta AI</div>
        <div class="source-chip">Mistral AI</div>
        <div class="source-chip">MIT TR</div>
        <div class="source-chip">TechCrunch</div>
        <div class="source-chip">The Verge</div>
        <div class="source-chip">EU AI Act</div>
        <div class="source-chip">NIST</div>
      </div>
    </div>

  </aside>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer>
  <div class="footer-inner">
    <div class="footer-col">
      <h4>SIGNAL</h4>
      <a href="#" data-i18n="about">SIGNALã«ã¤ã„ã¦</a>
      <a href="#scoreWidget" data-i18n="how_scored">ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®ä»•çµ„ã¿</a>
    </div>
    <div class="footer-col">
      <h4 data-i18n="legal">æ³•çš„æƒ…å ±</h4>
      <a href="#" data-i18n="privacy">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
      <a href="#" data-i18n="terms">åˆ©ç”¨è¦ç´„</a>
    </div>
    <div class="footer-col">
      <h4 data-i18n="contact_title">ãŠå•ã„åˆã‚ã›</h4>
      <a href="https://x.com" target="_blank" rel="noopener">X (Twitter)</a>
      <a href="mailto:contact@signal-ai.news" data-i18n="contact">ãŠå•ã„åˆã‚ã›</a>
    </div>
  </div>
  <div class="footer-bottom">
    <span>Â© 2026 SIGNAL â€” Powered by Claude AI</span>
    <span data-i18n="footer_tagline">AIã®æœ¬è³ªçš„ãªå‹•ãã ã‘ã‚’å±Šã‘ã‚‹</span>
  </div>
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• NEWSLETTER MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="nlModal">
  <div class="modal">
    <button class="modal-close" id="nlModalClose">Ã—</button>
    <div class="nl-lead" style="font-size:18px;margin-bottom:8px" data-i18n="nl_lead">æ¯æœã€é‡è¦ãªAIãƒ‹ãƒ¥ãƒ¼ã‚¹ã ã‘ã‚’ãƒ¡ãƒ¼ãƒ«ã§</div>
    <div class="nl-desc" data-i18n="nl_desc">Claude AIãŒå³é¸ã—ãŸä¸Šä½è¨˜äº‹ã®ã¿ã€‚ãƒã‚¤ã‚ºãªã—ã€åºƒå‘Šãªã—ã€‚æ¯æœ7æ™‚é…ä¿¡ã€‚</div>
    <div class="nl-form" style="margin-top:14px">
      <input type="email" class="nl-input" id="nlEmailModal" placeholder="your@email.com">
      <button class="nl-btn" id="nlBtnModal" data-i18n="nl_btn">ç„¡æ–™ã§è³¼èª­ã™ã‚‹</button>
      <div class="nl-msg" id="nlMsgModal"></div>
    </div>
    <div class="nl-proof" data-i18n="nl_proof">ç„¡æ–™ Â· ã„ã¤ã§ã‚‚è§£é™¤å¯èƒ½</div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SUPABASE CONFIG
// â€» ä»¥ä¸‹2è¡Œã‚’å®Ÿéš›ã®å€¤ã«æ›¸ãæ›ãˆã¦ãã ã•ã„
// Supabase â†’ Settings â†’ API Keys â†’ Publishable key
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SUPABASE_URL = 'https://hfezfnzfcuxxyycapdug.supabase.co';
const SUPABASE_KEY = 'sb_publishable_YbhReCLBzRm16QnknYfhEA_sPGwGXQb';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// å¤šè¨€èªãƒ†ã‚­ã‚¹ãƒˆ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const T = {
  ja: {
    cat_all: 'ã™ã¹ã¦', cat_research: 'ç ”ç©¶ãƒ»è«–æ–‡', cat_product: 'è£½å“ãƒ»ãƒªãƒªãƒ¼ã‚¹',
    cat_business: 'ãƒ“ã‚¸ãƒã‚¹', cat_policy: 'è¦åˆ¶ãƒ»æ”¿ç­–',
    live: 'ãƒ©ã‚¤ãƒ–', breaking: 'BREAKING', top_story: 'æœ¬æ—¥ã®æœ€é‡è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹',
    subscribe_btn: 'ç„¡æ–™ã§è³¼èª­', loading_articles: 'è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...',
    what_is_score: 'ã‚¹ã‚³ã‚¢ã¨ã¯ï¼Ÿ',
    loading: 'èª­ã¿è¾¼ã¿ä¸­...', no_articles: 'ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“',
    no_articles_desc: 'ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å®Ÿè¡Œå¾Œã€Supabase ã§ status ã‚’ published ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚',
    read_analysis: 'åˆ†æã‚’èª­ã‚€ â–¼', close_analysis: 'é–‰ã˜ã‚‹ â–²',
    source_link: 'å…ƒè¨˜äº‹ã‚’èª­ã‚€ â†’', why_matters: 'ãªãœé‡è¦ã‹',
    nl_lead: 'æ¯æœã€é‡è¦ãªAIãƒ‹ãƒ¥ãƒ¼ã‚¹ã ã‘ã‚’ãƒ¡ãƒ¼ãƒ«ã§',
    nl_desc: 'Claude AIãŒå³é¸ã—ãŸä¸Šä½è¨˜äº‹ã®ã¿ã€‚ãƒã‚¤ã‚ºãªã—ã€åºƒå‘Šãªã—ã€‚æ¯æœ7æ™‚é…ä¿¡ã€‚',
    nl_btn: 'ç„¡æ–™ã§è³¼èª­ã™ã‚‹', nl_proof: 'ç„¡æ–™ Â· ã„ã¤ã§ã‚‚è§£é™¤å¯èƒ½',
    nl_ok: 'ç™»éŒ²ã—ã¾ã—ãŸï¼æ˜æ—¥ã‹ã‚‰æ¯æœãŠå±Šã‘ã—ã¾ã™ã€‚', nl_already: 'ã™ã§ã«ç™»éŒ²æ¸ˆã¿ã§ã™ã€‚',
    nl_err: 'ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚',
    nl_invalid: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
    pulse: 'æœ¬æ—¥ã®å‹•å‘', stat_critical: 'ğŸ”´ æœ€é‡è¦', stat_high: 'ğŸŸ  é‡è¦',
    stat_today: 'æœ¬æ—¥ã®æ²è¼‰æ•°', stat_avg: 'å¹³å‡ã‚¹ã‚³ã‚¢',
    score_title: 'å“è³ªã‚¹ã‚³ã‚¢ã¨ã¯ï¼Ÿ',
    score_desc: 'Claude AIãŒ4ã¤ã®è»¸ã§æ¡ç‚¹ã—ãŸä¿¡é ¼æ€§æŒ‡æ¨™ã§ã™ã€‚60ç‚¹ä»¥ä¸Šã®ã¿æ²è¼‰ã—ã¾ã™ã€‚',
    ax1: 'æ–°è¦æ€§', ax2: 'ä¿¡é ¼æ€§', ax3: 'é‡è¦æ€§', ax4: 'å®Ÿç”¨æ€§',
    ad_title: 'ã‚¹ãƒãƒ³ã‚µãƒ¼', ad_cta: 'åºƒå‘Šæ²è¼‰ã®ãŠå•ã„åˆã‚ã›',
    sources_title: 'ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚½ãƒ¼ã‚¹ï¼ˆ13ä»¶ï¼‰',
    curated: (total, pass) => `æœ¬æ—¥ <strong>${total}</strong> ä»¶æ²è¼‰ä¸­`,
    about: 'SIGNALã«ã¤ã„ã¦', how_scored: 'ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®ä»•çµ„ã¿',
    legal: 'æ³•çš„æƒ…å ±', privacy: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼', terms: 'åˆ©ç”¨è¦ç´„',
    contact_title: 'ãŠå•ã„åˆã‚ã›', contact: 'ãŠå•ã„åˆã‚ã›',
    footer_tagline: 'AIã®æœ¬è³ªçš„ãªå‹•ãã ã‘ã‚’å±Šã‘ã‚‹',
    imp: { critical: 'æœ€é‡è¦', high: 'é‡è¦', normal: 'æ³¨ç›®' },
    cat: { research: 'ç ”ç©¶', product: 'è£½å“', business: 'ãƒ“ã‚¸ãƒã‚¹', policy: 'è¦åˆ¶' },
  },
  en: {
    cat_all: 'All', cat_research: 'Research', cat_product: 'Product',
    cat_business: 'Business', cat_policy: 'Policy',
    live: 'Live', breaking: 'BREAKING', top_story: "Today's Top Story",
    subscribe_btn: 'Subscribe Free', loading_articles: 'Loading articles...',
    what_is_score: 'How we score',
    loading: 'Loading...', no_articles: 'No articles yet',
    no_articles_desc: 'Run the pipeline and publish articles in Supabase.',
    read_analysis: 'Read Analysis â–¼', close_analysis: 'Close â–²',
    source_link: 'Read Source â†’', why_matters: 'Why It Matters',
    nl_lead: 'Daily AI Intelligence to Your Inbox',
    nl_desc: 'Only the most important AI news, curated by Claude AI. No noise, no ads.',
    nl_btn: 'Subscribe Free', nl_proof: 'Free Â· Unsubscribe anytime',
    nl_ok: 'Subscribed! First email arrives tomorrow morning.',
    nl_already: 'You are already subscribed.',
    nl_err: 'Subscription failed. Please try again.',
    nl_invalid: 'Please enter a valid email address.',
    pulse: "Today's Pulse", stat_critical: 'ğŸ”´ Critical', stat_high: 'ğŸŸ  High Impact',
    stat_today: 'Published Today', stat_avg: 'Avg Score',
    score_title: 'About Quality Score',
    score_desc: 'Claude AI rates each article on 4 axes. Only 60+ scores are published.',
    ax1: 'Novelty', ax2: 'Credibility', ax3: 'Impact', ax4: 'Utility',
    ad_title: 'Sponsor', ad_cta: 'Advertise with SIGNAL',
    sources_title: 'Monitored Sources (13)',
    curated: (total) => `<strong>${total}</strong> articles published today`,
    about: 'About SIGNAL', how_scored: 'How We Score',
    legal: 'Legal', privacy: 'Privacy Policy', terms: 'Terms of Use',
    contact_title: 'Contact', contact: 'Contact Us',
    footer_tagline: 'Only the AI signal you need',
    imp: { critical: 'CRITICAL', high: 'HIGH', normal: 'NOTABLE' },
    cat: { research: 'Research', product: 'Product', business: 'Business', policy: 'Policy' },
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let lang     = 'ja';
let category = 'all';
let articles = [];

const t = k => T[lang][k] || k;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SUPABASE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function sbGet(table, query = '') {
  const r = await fetch(`${SUPABASE_URL}/rest/v1/${table}?${query}`, {
    headers: { apikey: SUPABASE_KEY, 'Content-Type': 'application/json' }
  });
  if (!r.ok) throw new Error(`Supabase ${r.status}`);
  return r.json();
}

async function sbPost(table, body) {
  return fetch(`${SUPABASE_URL}/rest/v1/${table}`, {
    method: 'POST',
    headers: { apikey: SUPABASE_KEY, 'Content-Type': 'application/json', Prefer: 'return=minimal' },
    body: JSON.stringify(body)
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LOAD DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadArticles() {
  setLoading();
  try {
    articles = await sbGet('articles', 'status=eq.published&order=score.desc,created_at.desc&limit=100');
    renderAll();
  } catch (e) {
    showError(e.message);
  }
}

function renderAll() {
  renderFeatured();
  renderList();
  renderTicker();
  renderStats();
  updateCurationBar();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FEATURED
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderFeatured() {
  const top = articles.find(a => a.importance === 'critical') || articles.find(a => a.importance === 'high');
  if (!top) { document.getElementById('featuredSection').style.display = 'none'; return; }

  document.getElementById('featuredSection').style.display = '';
  const title   = lang === 'ja' ? (top.title_ja   || top.title_en)   : (top.title_en   || top.title_ja);
  const summary = lang === 'ja' ? (top.summary_ja || top.summary_en) : (top.summary_en || top.summary_ja);

  document.getElementById('featuredCard').innerHTML = `
    <div class="featured-card">
      <div>
        <div class="featured-badges">
          <span class="badge ${top.importance}">${t('imp')[top.importance] || top.importance}</span>
          <span class="badge cat-${top.category}">${t('cat')[top.category] || top.category}</span>
        </div>
        <div class="featured-title">${esc(title)}</div>
        ${top.key_insight ? `
        <div class="featured-insight">
          <div class="insight-label">${t('why_matters')}</div>
          ${esc(top.key_insight)}
        </div>` : ''}
        ${summary ? `<div style="font-size:14px;color:var(--muted);line-height:1.7;margin-bottom:16px">${esc(summary)}</div>` : ''}
        <div class="featured-meta">
          <span>ğŸ“ ${esc(top.source)}</span>
          <div class="featured-score">
            <span class="score-num">${top.score}/100</span>
            <div class="score-track"><div class="score-fill" style="width:${top.score}%"></div></div>
          </div>
        </div>
      </div>
      <div>
        <a href="${esc(top.url)}" target="_blank" rel="noopener" class="source-link-btn">${t('source_link')}</a>
      </div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ARTICLE LIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderList() {
  const list = document.getElementById('articlesList');
  const filtered = category === 'all' ? articles : articles.filter(a => a.category === category);

  // ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ‰è¨˜äº‹ã¯é™¤å¤–ï¼ˆé‡è¤‡é˜²æ­¢ï¼‰
  const topId = (articles.find(a => a.importance === 'critical') || articles.find(a => a.importance === 'high'))?.id;
  const shown = filtered.filter(a => a.id !== topId);

  if (!shown.length) {
    list.innerHTML = `<div class="state-box"><h3>${t('no_articles')}</h3><p>${t('no_articles_desc')}</p></div>`;
    return;
  }

  list.innerHTML = shown.map(a => renderCard(a)).join('');
}

function renderCard(a) {
  const title   = lang === 'ja' ? (a.title_ja   || a.title_en)   : (a.title_en   || a.title_ja);
  const summary = lang === 'ja' ? (a.summary_ja || a.summary_en) : (a.summary_en || a.summary_ja);
  const sumEn   = a.summary_en || '';
  const sumJa   = a.summary_ja || '';
  const date    = a.created_at ? new Date(a.created_at).toLocaleDateString(lang === 'ja' ? 'ja-JP' : 'en-US', {month:'short',day:'numeric'}) : '';
  const tags    = (a.tags || []).slice(0, 4).map(tag => `<span class="tag-chip">${esc(tag)}</span>`).join('');

  return `
<div class="article-card" id="card-${a.id}">
  <div class="card-top" onclick="toggleCard('${a.id}')">
    <div class="card-header">
      <div class="card-badges">
        <span class="badge ${a.importance}">${t('imp')[a.importance] || a.importance}</span>
        <span class="badge cat-${a.category}">${t('cat')[a.category] || a.category}</span>
      </div>
      <div class="card-score">
        <span class="score-num" style="font-size:11px">${a.score}</span>
        <div class="score-track"><div class="score-fill" style="width:${a.score}%"></div></div>
      </div>
    </div>
    <div class="card-title">${esc(title)}</div>
    ${a.key_insight ? `
    <div>
      <div class="card-insight-label">${t('why_matters')}</div>
      <div class="card-insight">${esc(a.key_insight)}</div>
    </div>` : ''}
    <div class="card-footer">
      <span class="card-source">ğŸ“ ${esc(a.source)}${date ? ` Â· ${date}` : ''}</span>
      <span class="expand-toggle">
        <span data-expand="${a.id}">${t('read_analysis')}</span>
        <span class="expand-icon">â–¼</span>
      </span>
    </div>
  </div>
  <div class="card-body" id="body-${a.id}">
    <div class="card-body-inner">
      <div class="summary-toggle">
        <span class="summary-tab active" onclick="switchSummary('${a.id}','ja',this)">æ—¥æœ¬èª</span>
        <span class="summary-tab"        onclick="switchSummary('${a.id}','en',this)">English</span>
      </div>
      <div class="full-summary" id="sumja-${a.id}">${esc(sumJa)}</div>
      <div class="full-summary" id="sumen-${a.id}" style="display:none">${esc(sumEn)}</div>
      <div class="card-action-row">
        <div class="card-tags">${tags}</div>
        <a href="${esc(a.url)}" target="_blank" rel="noopener" class="source-link-btn" style="font-size:11px">${t('source_link')}</a>
      </div>
    </div>
  </div>
</div>`;
}

function toggleCard(id) {
  const card = document.getElementById(`card-${id}`);
  const isExpanded = card.classList.toggle('expanded');
  const label = card.querySelector(`[data-expand="${id}"]`);
  if (label) label.textContent = isExpanded ? t('close_analysis') : t('read_analysis');
}

function switchSummary(id, l, btn) {
  document.getElementById(`sumja-${id}`).style.display = l === 'ja' ? '' : 'none';
  document.getElementById(`sumen-${id}`).style.display = l === 'en' ? '' : 'none';
  btn.closest('.summary-toggle').querySelectorAll('.summary-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TICKER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderTicker() {
  const notable = articles.filter(a => a.importance === 'critical' || a.importance === 'high').slice(0, 8);
  if (!notable.length) return;

  const track = document.getElementById('tickerTrack');
  const items = [...notable, ...notable].map(a => {
    const title = lang === 'ja' ? (a.title_ja || a.title_en) : (a.title_en || a.title_ja);
    return `<div class="ticker-item"><span class="ticker-badge ${a.importance}">${a.importance.toUpperCase()}</span><span>${esc(title)}</span></div>`;
  }).join('');
  track.innerHTML = items;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderStats() {
  const today = new Date().toISOString().slice(0,10);
  const todayArr = articles.filter(a => (a.created_at || '').startsWith(today));
  const avg = articles.length ? Math.round(articles.reduce((s,a) => s+(a.score||0),0)/articles.length) : 0;

  set('s-critical', articles.filter(a=>a.importance==='critical').length);
  set('s-high',     articles.filter(a=>a.importance==='high').length);
  set('s-today',    todayArr.length || articles.length);
  set('s-avg',      avg || 'â€”');
}

function updateCurationBar() {
  const bar = document.getElementById('curationBar');
  if (!articles.length) return;
  bar.innerHTML = `<span>${T[lang].curated(articles.length)}</span><a id="scoreInfoLink" onclick="scrollTo({top:document.getElementById('scoreWidget').offsetTop-80,behavior:'smooth'})">${t('what_is_score')}</a>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setLoading() {
  document.getElementById('articlesList').innerHTML =
    `<div class="state-box"><div class="spinner"></div><p>${t('loading')}</p></div>`;
}

function showError(msg) {
  document.getElementById('articlesList').innerHTML =
    `<div class="state-box"><h3>æ¥ç¶šã‚¨ãƒ©ãƒ¼</h3><p>SUPABASE_URL ã¨ SUPABASE_KEY ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚<br><small>${esc(msg)}</small></p></div>`;
}

function set(id, val) {
  const el = document.getElementById(id);
  if (el) el.textContent = val;
}

function esc(s) {
  return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LANGUAGE SWITCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function switchLang(l) {
  lang = l;
  document.getElementById('langBtn').textContent = l === 'ja' ? 'EN' : 'JA';
  document.documentElement.lang = l;

  // i18n ãƒ©ãƒ™ãƒ«ã‚’ä¸€æ‹¬æ›´æ–°
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (T[lang][key] && typeof T[lang][key] === 'string') el.textContent = T[lang][key];
  });

  // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å†æç”»
  renderAll();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NEWSLETTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function subscribe(email, msgEl, btnEl) {
  if (!email || !email.includes('@')) {
    showMsg(msgEl, t('nl_invalid'), 'err'); return;
  }
  btnEl.disabled = true;
  try {
    const r = await sbPost('subscribers', { email, language: lang });
    if (r.ok || r.status === 201) {
      showMsg(msgEl, t('nl_ok'), 'ok');
    } else if (r.status === 409 || r.status === 400) {
      showMsg(msgEl, t('nl_already'), 'err');
    } else {
      throw new Error(`${r.status}`);
    }
  } catch(e) {
    showMsg(msgEl, t('nl_err'), 'err');
  } finally {
    btnEl.disabled = false;
  }
}

function showMsg(el, text, type) {
  el.textContent = text;
  el.className = `nl-msg ${type}`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EVENTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.getElementById('langBtn').addEventListener('click', () => {
  switchLang(lang === 'ja' ? 'en' : 'ja');
});

// ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ + ã‚¿ãƒ–ä¸¡æ–¹ï¼‰
document.querySelectorAll('[data-cat]').forEach(btn => {
  btn.addEventListener('click', e => {
    category = e.currentTarget.dataset.cat;
    document.querySelectorAll('[data-cat]').forEach(b => b.classList.remove('active'));
    document.querySelectorAll(`[data-cat="${category}"]`).forEach(b => b.classList.add('active'));
    renderList();
  });
});

// ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼ï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‰
document.getElementById('nlBtn').addEventListener('click', () => {
  const email = document.getElementById('nlEmail').value.trim();
  subscribe(email, document.getElementById('nlMsg'), document.getElementById('nlBtn'));
});

// ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰
document.getElementById('nlBtnModal').addEventListener('click', () => {
  const email = document.getElementById('nlEmailModal').value.trim();
  subscribe(email, document.getElementById('nlMsgModal'), document.getElementById('nlBtnModal'));
});

// ãƒ˜ãƒƒãƒ€ãƒ¼è³¼èª­ãƒœã‚¿ãƒ³ â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
document.getElementById('headerSubBtn').addEventListener('click', () => {
  document.getElementById('nlModal').classList.add('open');
});

document.getElementById('nlModalClose').addEventListener('click', () => {
  document.getElementById('nlModal').classList.remove('open');
});

document.getElementById('nlModal').addEventListener('click', e => {
  if (e.target === document.getElementById('nlModal'))
    document.getElementById('nlModal').classList.remove('open');
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
loadArticles();
</script>
</body>
</html>
